
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è’ã‚‰ã—å…±æ „åœ Raider</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { margin:0; min-height:100vh; background:#000; display:flex; justify-content:center; align-items:center; font-family:system-ui,sans-serif; color:#fee2e2; }
  .container { width:94%; max-width:620px; padding:28px; background:linear-gradient(145deg,#1a0000,#000); border-radius:20px; border:1px solid #7f1d1d; box-shadow:0 0 50px rgba(239,68,68,.4); }
  h1 { text-align:center; margin-bottom:28px; font-size:28px; background:linear-gradient(90deg,#fecaca,#ef4444,#7f1d1d); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
  label { display:block; margin-top:20px; font-size:15px; color:#fecaca; }
  textarea, input { width:100%; box-sizing:border-box; margin-top:8px; padding:14px; border-radius:14px; background:#000; color:#fee2e2; border:1px solid #7f1d1d; outline:none; font-size:15px; font-family:monospace; }
  textarea { resize:vertical; height:180px; }
  #message { height:120px; }
  .row { display:flex; gap:16px; margin-top:8px; }
  .row > div { flex:1; }
  .buttons { display:flex; gap:16px; margin-top:28px; }
  button { flex:1; padding:18px; font-size:17px; font-weight:bold; border-radius:16px; border:none; cursor:pointer; color:white; transition:all 0.3s; }
  #startBtn { background:linear-gradient(135deg,#16a34a,#22c55e); }
  #stopBtn { background:linear-gradient(135deg,#dc2626,#ef4444); opacity:0.7; }
  #stopBtn.active { opacity:1; }
  button:hover:not(:disabled) { transform:translateY(-2px); box-shadow:0 8px 25px rgba(0,0,0,0.5); }
  button:disabled { opacity:0.5; cursor:not-allowed; }
  .log { margin-top:24px; padding:16px; background:#111; border-radius:14px; border:1px solid #7f1d1d; max-height:300px; overflow-y:auto; font-size:14px; color:#fecaca; line-height:1.6; font-family:monospace; }
  .stats { margin-top:12px; text-align:center; font-size:15px; color:#fbbf24; font-weight:bold; }
  .error { color:#fca5a5; font-weight:bold; }
</style>
</head>
<body>
<div class="container">
  <h1>è’ã‚‰ã—å…±æ „åœ Raider</h1>

  <label for="tokens">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒˆãƒ¼ã‚¯ãƒ³</label>
  <textarea id="tokens" placeholder="ãƒˆãƒ¼ã‚¯ãƒ³è¤‡æ•°å¯èƒ½ (æ”¹è¡Œ)"></textarea>

  <div class="row">
    <div>
      <label for="delay">é€ä¿¡é€Ÿåº¦</label>
      <input type="number" id="delay" value="5000" min="2000">
    </div>
    <div>
      <label for="count">é€ä¿¡å›æ•°</label>
      <input type="number" id="count" value="0" min="0">
    </div>
  </div>

  <div class="row">
    <div>
      <label for="guildId">ã‚µãƒ¼ãƒãƒ¼ID</label>
      <input type="text" id="guildId" placeholder="ä¾‹: 123456789012345678">
    </div>
    <div>
      <label for="channelId">ãƒãƒ£ãƒ³ãƒãƒ«ID</label>
      <input type="text" id="channelId" placeholder="ä¾‹: 987654321098765432">
    </div>
  </div>

  <label for="message">é€ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</label>
  <textarea id="message" maxlength="2000" placeholder="ã“ã“ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"></textarea>

  <div class="buttons">
    <button id="startBtn" onclick="startSending()">èµ·å‹•</button>
    <button id="stopBtn" onclick="stopSending()">åœæ­¢</button>
  </div>

  <div class="stats" id="stats">é€ä¿¡æˆåŠŸ: 0 å›</div>
  <div class="log" id="log"></div>
</div>

<script>
const tokensEl = document.getElementById('tokens');
const delayEl = document.getElementById('delay');
const countEl = document.getElementById('count');
const guildEl = document.getElementById('guildId');
const channelEl = document.getElementById('channelId');
const messageEl = document.getElementById('message');
const logEl = document.getElementById('log');
const statsEl = document.getElementById('stats');
const startBtn = document.getElementById('startBtn');
const stopBtn = document.getElementById('stopBtn');

let isRunning = false;
let successCount = 0;
let tokenList = [];
let currentIndex = 0;
let sentCount = 0;

function log(msg, className = '') {
  logEl.innerHTML += `<span class="${className}">${new Date().toLocaleTimeString('ja-JP', {hour12:false})} ${msg}</span><br>`;
  logEl.scrollTop = logEl.scrollHeight;
}

function updateStats() {
  statsEl.textContent = `é€ä¿¡ãƒ­ã‚°: ${successCount} å›`;
}

function clear() {
  logEl.innerHTML = '';
  successCount = sentCount = currentIndex = 0;
  updateStats();
}

function stopSending() {
  isRunning = false;
  stopBtn.classList.remove('active');
  startBtn.disabled = false;
  log('ğŸ›‘ åœæ­¢ã—ã¾ã—ãŸ');
}

async function validateToken(token) {
  try {
    const res = await fetch('https://discord.com/api/v10/users/@me', {
      headers: { 'Authorization': token.trim() }
    });
    return res.ok;
  } catch {
    return false;
  }
}

async function sendMessage(token, channelId, content) {
  const uaList = [
    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
    'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36'
  ];
  const randomUA = uaList[Math.floor(Math.random() * uaList.length)];

  try {
    const res = await fetch(`https://discord.com/api/v10/channels/${channelId}/messages`, {
      method: 'POST',
      headers: {
        'Authorization': token.trim(),
        'Content-Type': 'application/json',
        'User-Agent': randomUA
      },
      body: JSON.stringify({ content })
    });

    if (res.ok) {
      successCount++;
      updateStats();
      return { success: true };
    }

    if (res.status === 429) {
      const data = await res.json().catch(() => ({}));
      const wait = (data.retry_after || 5) * 1000 + 1000; // ä½™è£•
      log(`ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆæ¤œçŸ¥ ${Math.round(wait/1000)}ç§’å¾…æ©Ÿ`, 'error');
      await new Promise(r => setTimeout(r, wait));
      return { success: false, retry: true };
    }

    let reason = res.status;
    if (res.status === 401) reason = 'ç„¡åŠ¹ãƒˆãƒ¼ã‚¯ãƒ³';
    if (res.status === 403) reason = 'æ¨©é™ãªã—/å‡çµ';
    log(`é€ä¿¡å¤±æ•— [${reason}]`, 'error');
    return { success: false };
  } catch (e) {
    log(`ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼: ${e.message}`, 'error');
    return { success: false };
  }
}

async function startSending() {
  if (isRunning) return;
  clear();
  stopBtn.classList.add('active');
  startBtn.disabled = true;

  const raw = tokensEl.value.trim();
  const delay = Math.max(2000, parseInt(delayEl.value) || 5000);
  const max = parseInt(countEl.value) || 0;
  const channelId = channelEl.value.trim();
  const msg = messageEl.value.trim();

  if (!raw || !channelId || !msg) {
    log('å¿…é ˆé …ç›®ãŒå…¥åŠ›ã•ã‚Œã¦ãªã„ã‚ˆ', 'error');
    stopSending();
    return;
  }

  tokenList = raw.split('\n').map(t => t.trim()).filter(t => t.length > 50);

  if (tokenList.length === 0) {
    log('æœ‰åŠ¹ãƒˆãƒ¼ã‚¯ãƒ³ãªã„', 'error');
    stopSending();
    return;
  }

  log(`æœ‰åŠ¹ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ä¸­... (${tokenList.length}å€‹)`);

  const validTokens = [];
  for (const t of tokenList) {
    const valid = await validateToken(t);
    if (valid) validTokens.push(t);
    else log(`ç„¡åŠ¹ãƒˆãƒ¼ã‚¯ãƒ³é™¤å¤–: ${t.slice(0,15)}...`, 'error');
    await new Promise(r => setTimeout(r, 600));
  }

  if (validTokens.length === 0) {
    log('ãƒˆãƒ¼ã‚¯ãƒ³ç„¡åŠ¹ã«ã—ãŸã‚ˆã‰', 'error');
    stopSending();
    return;
  }

  tokenList = validTokens;
  log(`æœ‰åŠ¹: ${tokenList.length}å€‹ | é–“éš”:${delay}ms | æœ€å¤§:${max||'ç„¡é™'}å›é–‹å§‹`);

  isRunning = true;

  while (isRunning && (max === 0 || sentCount < max)) {
    const token = tokenList[currentIndex % tokenList.length];
    currentIndex++;

    const result = await sendMessage(token, channelId, msg);

    if (result.retry) {
      continue;
    }

    if (result.success) {
      sentCount++;
      log(`é€ä¿¡æˆåŠŸ [${sentCount}/${max||'âˆ'}]`);
    }

    if (isRunning) await new Promise(r => setTimeout(r, delay));
  }

  log('çµ‚äº†');
  stopSending();
}
</script>
</body>
</html>
